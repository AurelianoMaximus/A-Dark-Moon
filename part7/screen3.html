<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            font-family: Arial;
            color: white;
        }
        .split {
            height: 100%;
            width: 50%;
            position: fixed;
            z-index: 1;
            top: 0;
            overflow-x: hidden;
            padding-top: 20px;
        }
        
        .left {
            left: 0;
            background-color: #111;
        }
        
        .right {
            right: 0;
            background-color: red;
        }
    </style>
</head>
<body onload="generateGrid(35)">
    <div class="split left">
      <div id="eventText">
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
			<p></p>
        </div>
    </div>
    <input type="number" id="playerPosRow" name="playerPos" value="12">
	    <input type="number" id="playerPosCol" name="playerPos" value="12">
      <div class="split right">
        <div class="centered">
          <button onclick="eventText(Events('0'))">Start Fire</button>
          <button onclick="eventText(Events('1'))">Me too</button>		
		  <table id ="grid" style="width:5%">

		  </table>
        </div>
      </div>
    <script>
	//Update the text log 
      function eventText(logText) {
		//store all text paragraphs
		textNodes = document.getElementById('eventText').children; 
			
			//iterate through textnodes
			for(let i = textNodes.length-1; i != 0; i--){
				textNodes[i].innerText = textNodes[i-1].innerText;
				textNodes[i].style.opacity = ((textNodes.length-i)/textNodes.length);
				}
				//add current event to the top
				textNodes[0].innerText = logText;
      }
	  //stores event text 
	  function Events(eventID) {
		if(eventID == 0)
		{
			let fireEvents = ['fire is stoked','fire is roaring','fire is warm'];
			return(fireEvents[Math.floor(Math.random()*fireEvents.length)]);
		}
		if(eventID == 1)
		{
			let meTooEvents = ['floor creaks','metal walls are cold','they are restless'];
			return(meTooEvents[Math.floor(Math.random()*meTooEvents.length)]);
		}
      }
	  //generate exploration grid
	  //@ represents player location
	  function generateGrid(size){
		const grid = document.getElementById("grid");
			for(let row = 0; row <= size; row++){
				  var nRow = grid.insertRow(row);
				  nRow.id = row;
					for(let col = 0; col <=size; col++)
					{
						 var nCol = nRow.insertCell(col);
						 nCol.id = col;
						 nCol.innerHTML = "?";
					}
		}
		var x = document.getElementById("grid").rows[12].cells[12];
		x.innerHTML = "@";
		document.addEventListener("keydown", myFunction);
	}
		
	function myFunction() {
	let row = document.getElementById("playerPosRow").value;
	let col = document.getElementById("playerPosCol").value;
	if(event.key == "ArrowUp")
	{
			var x = document.getElementById("grid").rows[row].cells[col];
			x.innerHTML = "E";

			x = document.getElementById("grid").rows[row-1].cells[col];
			x.innerHTML = "@";
			
			//update row
			document.getElementById("playerPosRow").value = row-1;
			pos(document.getElementById("playerPosRow").value, document.getElementById("playerPosCol").value);
			
	}
	if(event.key == "ArrowDown")
	{
			var x = document.getElementById("grid").rows[row].cells[col];
			x.innerHTML = "E";
	
			x = document.getElementById("grid").rows[row-(-1)].cells[col];
			x.innerHTML = "@";
			
			//update row
			document.getElementById("playerPosRow").value = row-(-1);
			pos(document.getElementById("playerPosRow").value, document.getElementById("playerPosCol").value);
	}
	if(event.key == "ArrowLeft")
	{
			var x = document.getElementById("grid").rows[row].cells[col];
			x.innerHTML = "E";

			x = document.getElementById("grid").rows[row].cells[col-1];
			x.innerHTML = "@";
			
			//update row
			document.getElementById("playerPosCol").value = col-1;
			pos(document.getElementById("playerPosRow").value, document.getElementById("playerPosCol").value);
	}
	if(event.key == "ArrowRight")
	{
			var x = document.getElementById("grid").rows[row].cells[col];
			x.innerHTML = "E";

			x = document.getElementById("grid").rows[row].cells[col-(-1)];
			x.innerHTML = "@";
			
			//update row
			document.getElementById("playerPosCol").value = col-(-1);
			pos(document.getElementById("playerPosRow").value, document.getElementById("playerPosCol").value);
	}
}
function pos(row,col){
		console.log(row,col);
}  
</script>

   

	
	
	
	
</body>
</html>
